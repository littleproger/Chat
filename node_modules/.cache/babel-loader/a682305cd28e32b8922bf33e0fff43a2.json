{"ast":null,"code":"import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\"\n};\nexport function headerReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const messages = action.payload;\n      const allUserId = messages.map(msg => {\n        return msg.userId;\n      });\n      const messagesLength = messages.length;\n      const users = new Set(allUserId);\n      const createdAt = new Date(messages[messagesLength - 1].createdAt).toLocaleDateString().split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n\n      return {\n        state: { ...state,\n          numberUsers: users.size,\n          numberMessages: messagesLength,\n          lastMessageDate: lastMsgTime\n        }\n      };\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/yarik/Documents/binary/react-stage1/part2/src/components/reducers/headerReducer.js"],"names":["CHANGE_HEADER_DATA","initialState","roomName","numberUsers","numberMessages","lastMessageDate","headerReducer","state","action","type","messages","payload","allUserId","map","msg","userId","messagesLength","length","users","Set","createdAt","Date","toLocaleDateString","split","today","lastMsgTime","join","slice","size"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,wBAAnC;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,SADS;AAEnBC,EAAAA,WAAW,EAAE,CAFM;AAGnBC,EAAAA,cAAc,EAAE,CAHG;AAInBC,EAAAA,eAAe,EAAE;AAJE,CAArB;AAOA,OAAO,SAASC,aAAT,CAAuBC,KAAK,GAAGN,YAA/B,EAA6CO,MAA7C,EAAqD;AAC1D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKT,kBAAL;AACE,YAAMU,QAAQ,GAAGF,MAAM,CAACG,OAAxB;AACA,YAAMC,SAAS,GAAGF,QAAQ,CAACG,GAAT,CAAcC,GAAD,IAAS;AACtC,eAAOA,GAAG,CAACC,MAAX;AACD,OAFiB,CAAlB;AAIA,YAAMC,cAAc,GAAGN,QAAQ,CAACO,MAAhC;AACA,YAAMC,KAAK,GAAG,IAAIC,GAAJ,CAAQP,SAAR,CAAd;AAEA,YAAMQ,SAAS,GAAG,IAAIC,IAAJ,CAASX,QAAQ,CAACM,cAAc,GAAG,CAAlB,CAAR,CAA6BI,SAAtC,EACfE,kBADe,GAEfC,KAFe,CAET,GAFS,CAAlB;AAGA,YAAMC,KAAK,GAAG,IAAIH,IAAJ,GAAWC,kBAAX,GAAgCC,KAAhC,CAAsC,GAAtC,CAAd;AAEA,UAAIE,WAAW,GAAGL,SAAS,CAACM,IAAV,CAAe,GAAf,EAAoBC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,CAAlB;;AACA,UAAIP,SAAS,CAAC,CAAD,CAAT,KAAiBI,KAAK,CAAC,CAAD,CAA1B,EAA+B;AAC7BC,QAAAA,WAAW,GAAGL,SAAS,CAACM,IAAV,CAAe,GAAf,CAAd;AACD;;AAED,aAAO;AACLnB,QAAAA,KAAK,EAAE,EAAC,GAAGA,KAAJ;AAELJ,UAAAA,WAAW,EAAEe,KAAK,CAACU,IAFd;AAGLxB,UAAAA,cAAc,EAAEY,cAHX;AAILX,UAAAA,eAAe,EAAEoB;AAJZ;AADF,OAAP;;AASF;AACE,aAAOlB,KAAP;AA9BJ;AAgCD","sourcesContent":["import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\",\n};\n\nexport function headerReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const messages = action.payload;\n      const allUserId = messages.map((msg) => {\n        return msg.userId;\n      });\n\n      const messagesLength = messages.length;\n      const users = new Set(allUserId);\n\n      const createdAt = new Date(messages[messagesLength - 1].createdAt)\n        .toLocaleDateString()\n        .split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n\n      return {\n        state: {...state,\n        \n          numberUsers: users.size,\n          numberMessages: messagesLength,\n          lastMessageDate: lastMsgTime,\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}