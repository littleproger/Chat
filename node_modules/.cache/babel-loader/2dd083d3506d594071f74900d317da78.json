{"ast":null,"code":"import _objectSpread from\"/home/yarik/Documents/binary/react-stage1/part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{CHANGE_HEADER_DATA}from\"../actions/actionsType\";var initialState={roomName:\"My chat\",numberUsers:0,numberMessages:0,lastMessageDate:\"0\"};export function headerReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case CHANGE_HEADER_DATA:var messages=action.payload;var allUserId=messages.map(function(msg){return msg.userId;});var messagesLength=messages.length;var users=new Set(allUserId);var createdAt=new Date(messages[messagesLength-1].createdAt).toLocaleDateString().split(\".\");var today=new Date().toLocaleDateString().split(\".\");var lastMsgTime=createdAt.join(\".\").slice(0,5);if(createdAt[2]!==today[2]){lastMsgTime=createdAt.join(\".\");}return _objectSpread(_objectSpread({},state),{},{numberUsers:users.size,numberMessages:messagesLength,lastMessageDate:lastMsgTime});default:return state;}}","map":{"version":3,"sources":["/home/yarik/Documents/binary/react-stage1/part2/src/components/reducers/headerReducer.js"],"names":["CHANGE_HEADER_DATA","initialState","roomName","numberUsers","numberMessages","lastMessageDate","headerReducer","state","action","type","messages","payload","allUserId","map","msg","userId","messagesLength","length","users","Set","createdAt","Date","toLocaleDateString","split","today","lastMsgTime","join","slice","size"],"mappings":"qKAAA,OAASA,kBAAT,KAAmC,wBAAnC,CACA,GAAMC,CAAAA,YAAY,CAAG,CACnBC,QAAQ,CAAE,SADS,CAEnBC,WAAW,CAAE,CAFM,CAGnBC,cAAc,CAAE,CAHG,CAInBC,eAAe,CAAE,GAJE,CAArB,CAOA,MAAO,SAASC,CAAAA,aAAT,EAAqD,IAA9BC,CAAAA,KAA8B,2DAAtBN,YAAsB,IAARO,CAAAA,MAAQ,2CAC1D,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKT,CAAAA,kBAAL,CACE,GAAMU,CAAAA,QAAQ,CAAGF,MAAM,CAACG,OAAxB,CACA,GAAMC,CAAAA,SAAS,CAAGF,QAAQ,CAACG,GAAT,CAAa,SAACC,GAAD,CAAS,CACtC,MAAOA,CAAAA,GAAG,CAACC,MAAX,CACD,CAFiB,CAAlB,CAIA,GAAMC,CAAAA,cAAc,CAAGN,QAAQ,CAACO,MAAhC,CACA,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,GAAJ,CAAQP,SAAR,CAAd,CAEA,GAAMQ,CAAAA,SAAS,CAAG,GAAIC,CAAAA,IAAJ,CAASX,QAAQ,CAACM,cAAc,CAAG,CAAlB,CAAR,CAA6BI,SAAtC,EACfE,kBADe,GAEfC,KAFe,CAET,GAFS,CAAlB,CAGA,GAAMC,CAAAA,KAAK,CAAG,GAAIH,CAAAA,IAAJ,GAAWC,kBAAX,GAAgCC,KAAhC,CAAsC,GAAtC,CAAd,CAEA,GAAIE,CAAAA,WAAW,CAAGL,SAAS,CAACM,IAAV,CAAe,GAAf,EAAoBC,KAApB,CAA0B,CAA1B,CAA6B,CAA7B,CAAlB,CACA,GAAIP,SAAS,CAAC,CAAD,CAAT,GAAiBI,KAAK,CAAC,CAAD,CAA1B,CAA+B,CAC7BC,WAAW,CAAGL,SAAS,CAACM,IAAV,CAAe,GAAf,CAAd,CACD,CAED,sCAAWnB,KAAX,MACIJ,WAAW,CAAEe,KAAK,CAACU,IADvB,CAEIxB,cAAc,CAAEY,cAFpB,CAGIX,eAAe,CAAEoB,WAHrB,GAMF,QACE,MAAOlB,CAAAA,KAAP,CA3BJ,CA6BD","sourcesContent":["import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\",\n};\n\nexport function headerReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const messages = action.payload;\n      const allUserId = messages.map((msg) => {\n        return msg.userId;\n      });\n\n      const messagesLength = messages.length;\n      const users = new Set(allUserId);\n\n      const createdAt = new Date(messages[messagesLength - 1].createdAt)\n        .toLocaleDateString()\n        .split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n\n      return {...state,\n          numberUsers: users.size,\n          numberMessages: messagesLength,\n          lastMessageDate: lastMsgTime\n      };\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}