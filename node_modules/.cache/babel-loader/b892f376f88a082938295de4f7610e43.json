{"ast":null,"code":"import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\"\n};\nthis.setState({\n  roomInform: {\n    roomName: \"My chat\",\n    numberMessages: messagesLength,\n    numberUsers: users.size,\n    lastMessageDate: lastMsgTime\n  }\n});\nexport function headerReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const allUserId = this.state.messages.map(msg => {\n        return msg.userId;\n      });\n      const messagesLength = this.state.messages.length;\n      const users = new Set(allUserId);\n      const createdAt = new Date(this.state.messages[messagesLength - 1].createdAt).toLocaleDateString().split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n\n      return state;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/yarik/Documents/binary/react-stage1/part2/src/components/reducers/headerReducer.js"],"names":["CHANGE_HEADER_DATA","initialState","roomName","numberUsers","numberMessages","lastMessageDate","setState","roomInform","messagesLength","users","size","lastMsgTime","headerReducer","state","action","type","allUserId","messages","map","msg","userId","length","Set","createdAt","Date","toLocaleDateString","split","today","join","slice"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,wBAAnC;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,SADS;AAEnBC,EAAAA,WAAW,EAAE,CAFM;AAGnBC,EAAAA,cAAc,EAAE,CAHG;AAInBC,EAAAA,eAAe,EAAE;AAJE,CAArB;AAOA,KAAKC,QAAL,CAAc;AACZC,EAAAA,UAAU,EAAE;AACVL,IAAAA,QAAQ,EAAE,SADA;AAEVE,IAAAA,cAAc,EAAEI,cAFN;AAGVL,IAAAA,WAAW,EAAEM,KAAK,CAACC,IAHT;AAIVL,IAAAA,eAAe,EAAEM;AAJP;AADA,CAAd;AASA,OAAO,SAASC,aAAT,CAAuBC,KAAK,GAAGZ,YAA/B,EAA6Ca,MAA7C,EAAqD;AAC1D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKf,kBAAL;AACE,YAAMgB,SAAS,GAAG,KAAKH,KAAL,CAAWI,QAAX,CAAoBC,GAApB,CAAyBC,GAAD,IAAS;AACjD,eAAOA,GAAG,CAACC,MAAX;AACD,OAFiB,CAAlB;AAIA,YAAMZ,cAAc,GAAG,KAAKK,KAAL,CAAWI,QAAX,CAAoBI,MAA3C;AACA,YAAMZ,KAAK,GAAG,IAAIa,GAAJ,CAAQN,SAAR,CAAd;AAEA,YAAMO,SAAS,GAAG,IAAIC,IAAJ,CAChB,KAAKX,KAAL,CAAWI,QAAX,CAAoBT,cAAc,GAAG,CAArC,EAAwCe,SADxB,EAGfE,kBAHe,GAIfC,KAJe,CAIT,GAJS,CAAlB;AAKA,YAAMC,KAAK,GAAG,IAAIH,IAAJ,GAAWC,kBAAX,GAAgCC,KAAhC,CAAsC,GAAtC,CAAd;AAEA,UAAIf,WAAW,GAAGY,SAAS,CAACK,IAAV,CAAe,GAAf,EAAoBC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,CAAlB;;AACA,UAAIN,SAAS,CAAC,CAAD,CAAT,KAAiBI,KAAK,CAAC,CAAD,CAA1B,EAA+B;AAC7BhB,QAAAA,WAAW,GAAGY,SAAS,CAACK,IAAV,CAAe,GAAf,CAAd;AACD;;AACD,aAAOf,KAAP;;AAEF;AACE,aAAOA,KAAP;AAvBJ;AAyBD","sourcesContent":["import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\",\n};\n\nthis.setState({\n  roomInform: {\n    roomName: \"My chat\",\n    numberMessages: messagesLength,\n    numberUsers: users.size,\n    lastMessageDate: lastMsgTime,\n  },\n});\n\nexport function headerReducer(state = initialState, action) {\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const allUserId = this.state.messages.map((msg) => {\n        return msg.userId;\n      });\n\n      const messagesLength = this.state.messages.length;\n      const users = new Set(allUserId);\n\n      const createdAt = new Date(\n        this.state.messages[messagesLength - 1].createdAt\n      )\n        .toLocaleDateString()\n        .split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n      return state;\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}