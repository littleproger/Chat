{"ast":null,"code":"var _jsxFileName = \"/home/yarik/Documents/binary/react-stage1/part2/src/components/Chat/Chat.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { addFetchedMessage, deleteMessage, showEdit } from \"../actions/messageActions\";\nimport { changeHeaderData } from \"../actions/headerActions\";\nimport Header from \"./Header\";\nimport MessageList from \"./MessageList\";\nimport MessageInput from \"./MessageInput\";\nimport Modal from \"./Modal\";\nimport Spiner from \"../animatedElem/Spiner\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.editMessage = ({\n      id,\n      text\n    }) => {\n      this.setState({\n        messages: this.state.messages.map(message => {\n          if (message.id === id) {\n            message.text = text;\n            message.editedAt = new Date().toString();\n          }\n\n          return message;\n        }),\n        edtMsg: {\n          id: \"\",\n          editMsg: false,\n          text: \"\"\n        }\n      });\n    };\n\n    this.clickToEdit = id => {\n      const text = this.state.messages.filter(message => message.id === id);\n      this.setState({\n        edtMsg: {\n          id,\n          editMsg: true,\n          text\n        }\n      });\n    };\n\n    this.state = {\n      roomInform: {\n        roomName: \"My chat\",\n        numberUsers: 0,\n        numberMessages: 0,\n        lastMessageDate: \"0\"\n      },\n      messages: [],\n      myInform: {\n        userId: \"61325\",\n        avatar: \"https://resizing.flixster.com/EVAkglctn7E9B0hVKJrueplabuQ=/220x196/v1.cjs0NjYwNjtqOzE4NDk1OzEyMDA7MjIwOzE5Ng\",\n        user: \"Wendy\"\n      },\n      edtMsg: {\n        id: \"\",\n        editMsg: false,\n        text: \"\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    fetch(\"https://edikdolynskyi.github.io/react_sources/messages.json\").then(response => response.json()).then(data => {\n      this.props.addFetchedMessage(data);\n    });\n  }\n\n  render() {\n    const data = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pad-lr_chat\",\n      children: [/*#__PURE__*/_jsxDEV(Modal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        roomInfo: this.props.headerInform\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-messageWndw marg-t_20px\",\n        children: this.props.messages.length !== 0 ? /*#__PURE__*/_jsxDEV(MessageList, {\n          messages: this.props.messages,\n          myId: this.props.headerInform.userId,\n          deleteMessage: this.props.deleteMessage,\n          clickToEdit: this.props.showEdit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Spiner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n        addMessage: this.props.addMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    messages: state.chat.messages,\n    headerInform: state.header\n  };\n};\n\nconst mapDispatchToProps = {\n  addFetchedMessage,\n  deleteMessage,\n  showEdit\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);","map":{"version":3,"sources":["/home/yarik/Documents/binary/react-stage1/part2/src/components/Chat/Chat.js"],"names":["React","Component","connect","addFetchedMessage","deleteMessage","showEdit","changeHeaderData","Header","MessageList","MessageInput","Modal","Spiner","Chat","constructor","props","editMessage","id","text","setState","messages","state","map","message","editedAt","Date","toString","edtMsg","editMsg","clickToEdit","filter","roomInform","roomName","numberUsers","numberMessages","lastMessageDate","myInform","userId","avatar","user","componentDidMount","fetch","then","response","json","data","render","headerInform","length","addMessage","mapStateToProps","chat","header","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { addFetchedMessage, deleteMessage, showEdit } from \"../actions/messageActions\";\nimport { changeHeaderData } from \"../actions/headerActions\";\n\nimport Header from \"./Header\";\nimport MessageList from \"./MessageList\";\nimport MessageInput from \"./MessageInput\";\nimport Modal from \"./Modal\";\nimport Spiner from \"../animatedElem/Spiner\";\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      roomInform: {\n        roomName: \"My chat\",\n        numberUsers: 0,\n        numberMessages: 0,\n        lastMessageDate: \"0\",\n      },\n      messages: [],\n      myInform: {\n        userId: \"61325\",\n        avatar:\n          \"https://resizing.flixster.com/EVAkglctn7E9B0hVKJrueplabuQ=/220x196/v1.cjs0NjYwNjtqOzE4NDk1OzEyMDA7MjIwOzE5Ng\",\n        user: \"Wendy\",\n      },\n      edtMsg: {\n        id: \"\",\n        editMsg: false,\n        text: \"\",\n      },\n    };\n  }\n  componentDidMount() {\n    fetch(\"https://edikdolynskyi.github.io/react_sources/messages.json\")\n      .then((response) => response.json())\n      .then((data) => {\n        this.props.addFetchedMessage(data);\n      });\n  }\n\n  editMessage = ({ id, text }) => {\n    this.setState({\n      messages: this.state.messages.map((message) => {\n        if (message.id === id) {\n          message.text = text;\n          message.editedAt = new Date().toString();\n        }\n        return message;\n      }),\n      edtMsg: {\n        id: \"\",\n        editMsg: false,\n        text: \"\",\n      },\n    });\n  };\n\n  clickToEdit = (id) => {\n    const text = this.state.messages.filter((message) => message.id === id);\n    this.setState({\n      edtMsg: {\n        id,\n        editMsg: true,\n        text,\n      },\n    });\n  };\n\n  render() {\n    const data = this.state;\n    return (\n      <div className=\"pad-lr_chat\">\n        <Modal />\n        <Header roomInfo={this.props.headerInform} />\n        <div className=\"chat-messageWndw marg-t_20px\">\n          {this.props.messages.length !== 0 ? (\n            <MessageList\n              messages={this.props.messages}\n              myId={this.props.headerInform.userId}\n              deleteMessage={this.props.deleteMessage}\n              clickToEdit={this.props.showEdit}\n            />\n          ) : (\n            <Spiner />\n          )}\n        </div>\n        <MessageInput addMessage={this.props.addMessage} />\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    messages: state.chat.messages,\n    headerInform: state.header,\n  };\n};\nconst mapDispatchToProps = {\n  addFetchedMessage,\n  deleteMessage,\n  showEdit\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);\n"]},"metadata":{},"sourceType":"module"}