{"ast":null,"code":"import _toConsumableArray from\"/home/yarik/Documents/binary/react-stage1/part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/yarik/Documents/binary/react-stage1/part2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{ADD_NEW_MESSAGE,FETCHED_MESSAGES,DELETE_MESSAGE,SHOW_EDIT,HIDE_EDIT,EDIT_MESSAGE}from\"../actions/actionsType\";var initialState={messages:[],myInform:{userId:\"61325\",avatar:\"https://resizing.flixster.com/EVAkglctn7E9B0hVKJrueplabuQ=/220x196/v1.cjs0NjYwNjtqOzE4NDk1OzEyMDA7MjIwOzE5Ng\",user:\"Yaroslav\"},editMsg:{id:\"\",editMsg:false,text:\"\"}};export function chatReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_NEW_MESSAGE:var message={id:action.payload.id,userId:state.myInform.userId,avatar:state.myInform.avatar,user:state.myInform.user,text:action.payload.text,createdAt:action.payload.createdAt,editedAt:\"\"};return _objectSpread(_objectSpread({},state),{},{messages:[].concat(_toConsumableArray(state.messages),[message])});case FETCHED_MESSAGES:return _objectSpread(_objectSpread({},state),{},{messages:[].concat(_toConsumableArray(state.messages),_toConsumableArray(action.payload))});case DELETE_MESSAGE:return _objectSpread(_objectSpread({},state),{},{messages:state.messages.filter(function(message){return message.id!==action.payload;})});case SHOW_EDIT:console.log(action.payload);if(action.payload){var text=state.messages.filter(function(message){return message.id===action.payload;});return _objectSpread(_objectSpread({},state),{},{editMsg:{id:action.payload,editMsg:true,text:text[0].text}});}else{var myMessage=state.messages.filter(function(message){return state.myInform.userId===message.userId;});var lastMessage=myMessage[myMessage.length-1];if(lastMessage){return _objectSpread(_objectSpread({},state),{},{editMsg:{id:lastMessage.id,editMsg:true,text:lastMessage.text}});}else{alert(\"You must write message first!\\nThis button for edit last message!\");}}case HIDE_EDIT:return _objectSpread(_objectSpread({},state),{},{editMsg:{id:\"\",editMsg:false,text:\"\"}});case EDIT_MESSAGE:return _objectSpread(_objectSpread({},state),{},{messages:state.messages.map(function(message){if(message.id===action.payload.id){message.text=action.payload.text;message.editedAt=new Date().toString();}return message;})});default:return state;}}","map":{"version":3,"sources":["/home/yarik/Documents/binary/react-stage1/part2/src/components/reducers/chatReducer.js"],"names":["ADD_NEW_MESSAGE","FETCHED_MESSAGES","DELETE_MESSAGE","SHOW_EDIT","HIDE_EDIT","EDIT_MESSAGE","initialState","messages","myInform","userId","avatar","user","editMsg","id","text","chatReducer","state","action","type","message","payload","createdAt","editedAt","filter","console","log","myMessage","lastMessage","length","alert","map","Date","toString"],"mappings":"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","sourcesContent":["import {\n  ADD_NEW_MESSAGE,\n  FETCHED_MESSAGES,\n  DELETE_MESSAGE,\n  SHOW_EDIT,\n  HIDE_EDIT,\n  EDIT_MESSAGE,\n} from \"../actions/actionsType\";\nconst initialState = {\n  messages: [],\n  myInform: {\n    userId: \"61325\",\n    avatar:\n      \"https://resizing.flixster.com/EVAkglctn7E9B0hVKJrueplabuQ=/220x196/v1.cjs0NjYwNjtqOzE4NDk1OzEyMDA7MjIwOzE5Ng\",\n    user: \"Yaroslav\",\n  },\n  editMsg: {\n    id: \"\",\n    editMsg: false,\n    text: \"\",\n  },\n};\n\nexport function chatReducer(state = initialState, action) {\n  switch (action.type) {\n    case ADD_NEW_MESSAGE:\n      const message = {\n        id: action.payload.id,\n        userId: state.myInform.userId,\n        avatar: state.myInform.avatar,\n        user: state.myInform.user,\n        text: action.payload.text,\n        createdAt: action.payload.createdAt,\n        editedAt: \"\",\n      };\n      return { ...state, messages: [...state.messages, message] };\n\n    case FETCHED_MESSAGES:\n      return { ...state, messages: [...state.messages, ...action.payload] };\n\n    case DELETE_MESSAGE:\n      return {\n        ...state,\n        messages: state.messages.filter(\n          (message) => message.id !== action.payload\n        ),\n      };\n\n    case SHOW_EDIT:\n      console.log(action.payload);\n      if (action.payload) {\n        const text = state.messages.filter(\n          (message) => message.id === action.payload\n        );\n        return {\n          ...state,\n          editMsg: { id: action.payload, editMsg: true, text: text[0].text },\n        };\n      } else {\n        const myMessage = state.messages.filter(\n          (message) => state.myInform.userId === message.userId\n        );\n        const lastMessage = myMessage[myMessage.length - 1];\n        if (lastMessage) {\n          return {\n            ...state,\n            editMsg: {\n              id: lastMessage.id,\n              editMsg: true,\n              text: lastMessage.text,\n            },\n          };\n        } else {\n          alert(\n            \"You must write message first!\\nThis button for edit last message!\"\n          );\n        }\n      }\n\n    case HIDE_EDIT:\n      return { ...state, editMsg: { id: \"\", editMsg: false, text: \"\" } };\n\n    case EDIT_MESSAGE:\n      return {\n        ...state,\n        messages: state.messages.map((message) => {\n          if (message.id === action.payload.id) {\n            message.text = action.payload.text;\n            message.editedAt = new Date().toString();\n          }\n          return message;\n        }),\n      };\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}