{"ast":null,"code":"import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\"\n};\nexport function headerReducer(state = initialState, action) {\n  console.log(state);\n\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const allUserId = state.messages.map(msg => {\n        return msg.userId;\n      });\n      const messagesLength = this.state.messages.length;\n      const users = new Set(allUserId);\n      const createdAt = new Date(this.state.messages[messagesLength - 1].createdAt).toLocaleDateString().split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n\n      return;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/yarik/Documents/binary/react-stage1/part2/src/components/reducers/headerReducer.js"],"names":["CHANGE_HEADER_DATA","initialState","roomName","numberUsers","numberMessages","lastMessageDate","headerReducer","state","action","console","log","type","allUserId","messages","map","msg","userId","messagesLength","length","users","Set","createdAt","Date","toLocaleDateString","split","today","lastMsgTime","join","slice"],"mappings":"AAAA,SAASA,kBAAT,QAAmC,wBAAnC;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,QAAQ,EAAE,SADS;AAEnBC,EAAAA,WAAW,EAAE,CAFM;AAGnBC,EAAAA,cAAc,EAAE,CAHG;AAInBC,EAAAA,eAAe,EAAE;AAJE,CAArB;AAOA,OAAO,SAASC,aAAT,CAAuBC,KAAK,GAAGN,YAA/B,EAA6CO,MAA7C,EAAqD;AACxDC,EAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;;AACF,UAAQC,MAAM,CAACG,IAAf;AACE,SAAKX,kBAAL;AACE,YAAMY,SAAS,GAAGL,KAAK,CAACM,QAAN,CAAeC,GAAf,CAAoBC,GAAD,IAAS;AAC5C,eAAOA,GAAG,CAACC,MAAX;AACD,OAFiB,CAAlB;AAIA,YAAMC,cAAc,GAAG,KAAKV,KAAL,CAAWM,QAAX,CAAoBK,MAA3C;AACA,YAAMC,KAAK,GAAG,IAAIC,GAAJ,CAAQR,SAAR,CAAd;AAEA,YAAMS,SAAS,GAAG,IAAIC,IAAJ,CAChB,KAAKf,KAAL,CAAWM,QAAX,CAAoBI,cAAc,GAAG,CAArC,EAAwCI,SADxB,EAGfE,kBAHe,GAIfC,KAJe,CAIT,GAJS,CAAlB;AAKA,YAAMC,KAAK,GAAG,IAAIH,IAAJ,GAAWC,kBAAX,GAAgCC,KAAhC,CAAsC,GAAtC,CAAd;AAEA,UAAIE,WAAW,GAAGL,SAAS,CAACM,IAAV,CAAe,GAAf,EAAoBC,KAApB,CAA0B,CAA1B,EAA6B,CAA7B,CAAlB;;AACA,UAAIP,SAAS,CAAC,CAAD,CAAT,KAAiBI,KAAK,CAAC,CAAD,CAA1B,EAA+B;AAC7BC,QAAAA,WAAW,GAAGL,SAAS,CAACM,IAAV,CAAe,GAAf,CAAd;AACD;;AAED;;AAEF;AACE,aAAOpB,KAAP;AAxBJ;AA0BD","sourcesContent":["import { CHANGE_HEADER_DATA } from \"../actions/actionsType\";\nconst initialState = {\n  roomName: \"My chat\",\n  numberUsers: 0,\n  numberMessages: 0,\n  lastMessageDate: \"0\",\n};\n\nexport function headerReducer(state = initialState, action) {\n    console.log(state)\n  switch (action.type) {\n    case CHANGE_HEADER_DATA:\n      const allUserId = state.messages.map((msg) => {\n        return msg.userId;\n      });\n\n      const messagesLength = this.state.messages.length;\n      const users = new Set(allUserId);\n\n      const createdAt = new Date(\n        this.state.messages[messagesLength - 1].createdAt\n      )\n        .toLocaleDateString()\n        .split(\".\");\n      const today = new Date().toLocaleDateString().split(\".\");\n\n      let lastMsgTime = createdAt.join(\".\").slice(0, 5);\n      if (createdAt[2] !== today[2]) {\n        lastMsgTime = createdAt.join(\".\");\n      }\n      \n      return ;\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}